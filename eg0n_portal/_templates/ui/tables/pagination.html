{% load i18n static %}
{% if table.page.has_other_pages %}
<div class="card-footer d-flex align-items-center">
    <div class="dropdown">
        <a class="btn dropdown-toggle" data-bs-toggle="dropdown">
            <span id="page-count" class="me-1">{{ table.page.paginator.per_page }}</span>
            <span>records</span>
        </a>
        <div class="dropdown-menu">
            <a class="dropdown-item{% if table.page.paginator.per_page == 10 %} active{% endif %}" href="?per_page=10"
                data-value="10">10 {% translate "records" %}</a>
            <a class="dropdown-item{% if table.page.paginator.per_page == 20 %} active{% endif %}" href="?per_page=20"
                data-value="20">20 {% translate "records" %}</a>
            <a class="dropdown-item{% if table.page.paginator.per_page == 50 %} active{% endif %}" href="?per_page=50"
                data-value="50">50 {% translate "records" %}</a>
            <a class="dropdown-item{% if table.page.paginator.per_page == 100 %} active{% endif %}" href="?per_page=100"
                data-value="100">100 {% translate "records" %}</a>
        </div>
    </div>
    <ul class="pagination m-0 ms-auto">
        {# Previous page #}
        {% if table.page.has_previous %}
        <li class="page-item">
            <a class="page-link" href="{% querystring page=table.page.previous_page_number %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-1">
                    <path d="M15 6l-6 6l6 6"></path>
                </svg>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-1">
                    <path d="M15 6l-6 6l6 6"></path>
                </svg>
            </a>
        </li>
        {% endif %}

        {# Sliding pages #}
        {% with total_pages=table.paginator.num_pages current=table.page.number %}
        {% if total_pages > 10 %}
            {% if current > 6 %}
                <li class="page-item"><a class="page-link" href="{% querystring page=1 %}">1</a></li>
                <li class="page-item disabled"><span class="page-link">…</span></li>
            {% endif %}

            {% with start=current|add:"-4" end=current|add:"5" %}
                {% for i in table.paginator.page_range %}
                    {% if i >= start and i <= end %}
                        {% if i == current %}
                            <li class="page-item active"><span class="page-link">{{ i }}</span></li>
                        {% else %}
                            <li class="page-item"><a class="page-link" href="{% querystring page=i %}">{{ i }}</a></li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            {% endwith %}

            {% with limit=total_pages|add:"-5" %}
                {% if current < limit %}
                    <li class="page-item disabled"><span class="page-link">…</span></li>
                    <li class="page-item"><a class="page-link" href="{% querystring page=total_pages %}">{{ total_pages }}</a></li>
                {% endif %}
            {% endwith %}
        {% else %}
            {% for i in table.paginator.page_range %}
                {% if i == current %}
                    <li class="page-item active"><span class="page-link">{{ i }}</span></li>
                {% else %}
                    <li class="page-item"><a class="page-link" href="{% querystring page=i %}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}
        {% endif %}
        {% endwith %}

        {# Next page #}
        {% if table.page.has_next %}
        <li class="page-item">
            <a class="page-link" href="{% querystring page=table.page.next_page_number %}" aria-label="Next">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-1">
                    <path d="M9 6l6 6l-6 6"></path>
                </svg>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-1">
                    <path d="M9 6l6 6l-6 6"></path>
                </svg>
            </a>
        </li>
        {% endif %}
    </ul>
</div>
{% endif %}
